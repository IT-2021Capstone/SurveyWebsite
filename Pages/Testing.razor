@page "/Testing"
@attribute [Authorize(Policy = "RequireCreation")]
@using SurveyWebsite.Data
@using SurveyWebsite.Pages
@using System.Security.Claims
@using Microsoft.AspNetCore.Authorization;
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor _httpContextAccessor
@inject Testingstuff ts
@inherits OwningComponentBase<Testingstuff>

<h3>Testing</h3>
<button class="btn btn-primary" @onclick="questionAdd"> addQuestion </button>

            <!--Question Type:
<label for="question">Choose the type of Question you want for your next question:</label>
<select ="selectedValue" name="Type" id="Type">
    <option value=1>Open</option>
    <option value=2>True False</option>
    <option value=3>Mutiple Choice</option>
</select>
<br>


{
    <input type="checkbox" id="required3" name="required3" value=0>
    <label for="required3"> Is This Question Optional?</label>
    <br>
    <label for="qtext3">Question Text:</label>

    <input type="text" =questionValue>
    <br>

    <label for="mutiple1">Pick Your Answer:</label>
    <br>

    <label for="ctext1">Write Your Choice Text:</label>
    <input type="text" id="ctext1" name="ctext1">
    <input type="radio" id="first1" name="mutiple1" value=1>
    <label for="first1">Option One</label>
    <br>

    <label for="ctext2">Write Your Choice Text:</label>
    <input type="text" id="ctext2" name="ctext2">
    <input type="radio" id="second1" name="mutiple1" value=2>
    <label for="third1">Option Two</label>
    <br>

    <label for="ctext3">Write Your Choice Text:</label>
    <input type="text" id="ctext3" name="ctext3">
    <input type="radio" id="third1" name="mutiple1" value=3>
    <label for="third1">Option Three</label>
    <br>
    <input type="submit" value="AddNewChoice">-->
    @*@foreach (QuestionOption QO in question.QOpts)
        {
            <label>
                &nbsp;&nbsp;&nbsp;&nbsp; Option @QO.ID:
                &nbsp;&nbsp;&nbsp;&nbsp;<textarea>@QO.OptionText</textarea>
            </label>
            <br />
            <br />

        }*@
    <!--<button class="btn btn-secondary">Add Option</button>
}
else if (selectedValue == 2)
{
    <form>
        <label>

            <input type="checkbox" id="required2" name="required2" value=0>
            <label for="required2"> Is This Question Optional?</label><br>
            <label for="qtext2">Question Text:</label>
            <input type="text"=questionValue><br>

            <label for="trueF1">This will be what the Truefalse will look like in the finished Survey:</label>
            <br>
            <input type="radio" id="true1" name="TrueF1" value=1>
            <label for="true1">True</label><br>
            <input type="radio" id="false1" name="TrueF1" value=0>
            <label for="false1">False</label><br>
            <br>

        </label>
    </form>
}
else if (selectedValue == 1)
{
    <form>
        <label>
            <input type="checkbox" id="required1" name="required1" value=0>
            <label for="required1"> Is This Question Optional?</label><br>
            <label for="qtext1">Question Text:</label>
            <input type="text" =questionValue><br>


            <br>
            <label for="openQ1">This will be what the textbox will look like on the survey:</label>
            <br>
            <textarea id="openQ1" name="openQ1" rows="4" cols="50">
                    Write Here
                    </textarea>
            <br><br>
        </label>
    </form>

}-->

@code {


    private string user = "";

    protected override void OnInitialized()
    {
        if (_httpContextAccessor.HttpContext.User.Identity.IsAuthenticated)
        {
            user = _httpContextAccessor.HttpContext.User.FindFirst(ClaimTypes.NameIdentifier).Value;
        }

        base.OnInitialized();
    }

    public void questionAdd()
    {
        ts.SendUserTakenSurvey(user, 12);
        // ts.ChangeUserRole(user,"superAdmin");
        var te = 3;

    }

}